/*! rluckomui 29-06-2014 */
(function(){var a,b,c,d,e,f,g,h=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1},i=function(a,b){return function(){return a.apply(b,arguments)}},j={}.hasOwnProperty,k=function(a,b){function c(){this.constructor=a}for(var d in b)j.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};e=null!=e?e:this,g=function(a,b){return null==b&&(b=f),e[a]=b,window[a]=b},f={},g("ambigui",f),a=function(){function a(){}return a.prototype.valAndFormatArrays=function(a){var b,c,d,e,f,g,i,j,k;for(g="-+.eE0123456789".split(""),b=a.split(""),b.reverse(),c="",f="",i=[],d=[],e={};0!==b.length;){for(;j=b[b.length-1],h.call(g,j)>=0&&b.length>0;)f+=b.pop();for(;k=b[b.length-1],!(h.call(g,k)>=0)&&b.length>0;)c+=b.pop();!isNaN(Number(f))&&f.length>0?(e[i.length]=d.length,i.push(parseFloat(f)),d.push(null),f=""):f.length>0&&(c=d.pop()+f+c,f=""),c.length>0&&(d.push(c),c="")}return[i,d,e]},a.prototype.makeFormatter=function(a,b){return function(c){var d,e,f,g,h,i,j;for(d=function(){var b,c,d;for(d=[],b=0,c=a.length;c>b;b++)h=a[b],d.push(h);return d}(),e=i=0,j=c.length;j>i;e=++i)f=c[e],d[b[e]]=f;return g=function(a,b){return a+b},d.reduce(g,"")}},a.prototype.interpolation=function(a,b){var c,d,e,f;return a instanceof Array&&b instanceof Array?(d=function(){var c,d,g;for(g=[],e=c=0,d=b.length;d>c;e=++c)f=b[e],g.push(f-a[e]);return g}(),function(b){var c,f,g,h;for(h=[],e=f=0,g=a.length;g>f;e=++f)c=a[e],h.push(c+d[e]*b);return h}):(c=b-a,function(b){return a+c*b})},a.prototype.transition=function(a,b,c,d,e){var f;return f=this.interpolation(c,d),function(c){return a.setAttribute(b,e(f(c)))}},a.prototype.animation=function(a,b,c,d,e,f,g){var h,i,j,k,l,m,n,o,p,q,r,s;return r=this.valAndFormatArrays(c),l=r[0],j=r[1],k=r[2],s=this.valAndFormatArrays(d),p=s[0],n=s[1],o=s[2],i=this.makeFormatter(j,k),q=this.transition(a,b,l,p,i),m=null,h=function(){var a;return null==m&&(m=(new Date).getTime()),a=(new Date).getTime()-m,a>=f?(q(1),null!=g?g():void 0):(q(a/f),window.setTimeout(h,e))}},a}(),f.Animator=a,f.DOGWOOD={},d=function(){function a(a){this.toggleChildrenVisible=i(this.toggleChildrenVisible,this),this.makeContentGroup=i(this.makeContentGroup,this),this.animateVisible=i(this.animateVisible,this),this.visibleChildren=i(this.visibleChildren,this),this.hide=i(this.hide,this),this.hideChildren=i(this.hideChildren,this),this.showChildren=i(this.showChildren,this),this.animateCircle=i(this.animateCircle,this),this.makeCircle=i(this.makeCircle,this),this.animateContent=i(this.animateContent,this),this.animateLine=i(this.animateLine,this),this.animateStar=i(this.animateStar,this),this.makeStar=i(this.makeStar,this),this.getStarLinePoints=i(this.getStarLinePoints,this),this.getStarTop=i(this.getStarTop,this),this.makeLine=i(this.makeLine,this),this.getLinePoints=i(this.getLinePoints,this),this.totalHeight=i(this.totalHeight,this),this.flagpoleLength=i(this.flagpoleLength,this),this.moveChildren=i(this.moveChildren,this),this.updateChildren=i(this.updateChildren,this),this.contentHeight=i(this.contentHeight,this),this.move=i(this.move,this),this.updateOuterFrame=i(this.updateOuterFrame,this),this.updatePosition=i(this.updatePosition,this),this.requestUpdate=i(this.requestUpdate,this),this.newChild=i(this.newChild,this),this.toString=i(this.toString,this);var b,c,d,e,f,g,h,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z;if(this.children=[],c=null!=(f=a.parent)?f:a,this.name=null!=(g=a.text)?g:"Root",this.indent=null!=(s=c.indent)?s:40,this.contentDX=null!=(t=c.contentDX)?t:15,this.circleRadius=null!=(u=c.circleRadius)?u:4,this.animateDuration=null!=(v=c.animateDuration)?v:400,this.isHidden=null!=(w=a.isHidden)?w:!1,this.scale=this.isHidden?"0 1":"1 1",this.emptyColor=null!=(x=c.emptyColor)?x:"white",this.treeColor=null!=(y=c.treeColor)?y:"slateblue",this.marginTop=null!=(z=c.marginTop)?z:20,this.marginBottom=null!=(h=c.marginBottom)?h:10,this.frameLength=null!=(j=c.frameLength)?j:20,this.newStar=null!=(k=c.newStar)?k:!1,this.lineWidth=null!=(l=c.lineWidth)?l:2,this.starLength=this.newStar?null!=(m=c.starLength)?m:15:0,this.starRadius=this.newStar?null!=(n=c.starRadius)?n:5:0,this.outerFramePaddingBottom=null!=(o=c.outerFramePaddingBottom)?o:20,this.x=null!=(p=a.x)?p:5,this.y=null!=(q=a.y)?q:0,null!=a.parent?(this.parent=a.parent,this.el=a.el):(this.isRoot=!0,this.div=a.el,this.el=this.svgElement("svg"),this.div.appendChild(this.el)),this.contentY=this.y+this.marginTop,this.makeContentGroup(),this.makeContent(),this.makeLine(),this.newStar&&this.makeStar(),this.isHidden&&null!=a.children&&(this.circleY=this.y+this.marginTop+this.contentHeight()+this.marginBottom,this.circleX=this.indent),null!=a.children)for(r=a.children,d=0,e=r.length;e>d;d++)b=r[d],b.isHidden=!0,this.newChild(b)}return a.animator=new f.Animator,a.prototype.svgElement=function(a,b){var c,d,e;null==b&&(b={}),d=document.createElementNS("http://www.w3.org/2000/svg",a),null==b.version&&(b.version="1.1"),b.xmlns="http://www.w3.org/2000/svg";for(c in b)e=b[c],d.setAttribute(c,e);return d},a.prototype.htmlElement=function(a,b){var c,d,e;null==b&&(b={}),d=document.createElementNS("http://www.w3.org/1999/xhtml",a),b.xmlns="http://www.w3.org/1999/xhtml";for(c in b)e=b[c],d.setAttribute(c,e);return d},a.prototype.toString=function(){var a,b,c,d,e,f,g,h,i,j;for(d="name: "+this.name+"\n isHidden: "+this.isHidden+" x: "+this.x+" y: "+this.y,d+=" contentDX: "+this.contentDX+" contentOffset: "+this.marginBottom()+" ",d+="contentX: "+this.contentX,d+=" textY: "+this.contentY+" linePoints: "+this.linePoints+" circleX: "+this.circleX,d+=" circleY "+this.circleY,d+=" scale: "+this.scale,d+="\n",i=this.children,e=0,g=i.length;g>e;e++)a=i[e],d+=a.toString();for(c="",j=d.split("\n"),f=0,h=j.length;h>f;f++)b=j[f],c+="   "+b+"\n";return c},a.prototype.newChild=function(a){var b,c,d,e,f;return null==a&&(a={}),null!=this.circle||this.isHidden||this.makeCircle(),f={transform:"translate("+this.indent+", 0)"},e=this.svgElement("g",f),d=a.isHidden?"0 1":"1 1",f={transform:"scale("+d+")"},c=this.svgElement("g",f),e.appendChild(c),this.el.appendChild(e),a.el=c,a.parent=this,null==a.text&&(a.text="child"),a.x=this.x+this.indent,a.y=a.isHidden?this.y:this.y+this.flagpoleLength(),b=new this.constructor(a),this.children.push(b)},a.prototype.requestUpdate=function(){return null!=this.parent?this.parent.requestUpdate():this.updatePosition()},a.prototype.updatePosition=function(a){return null==a&&(a=null),this.updateChildren(),null==this.parent&&this.updateOuterFrame(),this.moveChildren(),this.move()},a.prototype.updateOuterFrame=function(){var b,c;return c=this.div.offsetHeight,c!==this.totalHeight()+this.contentHeight()+this.outerFramePaddingBottom?(b=this.totalHeight()+this.contentHeight()+this.outerFramePaddingBottom,a.animator.animation(this.div,"height",""+c+"px",""+b+"px",this.frameLength,this.animateDuration,null)(),a.animator.animation(this.el,"height",""+c+"px",""+b+"px",this.frameLength,this.animateDuration,null)()):void 0},a.prototype.move=function(){return this.newStar&&this.animateStar(),this.animateLine(),this.animateContent(),this.animateCircle(),this.animateVisible()},a.prototype.contentHeight=function(){var a,b,c,d;for(d=this.contentGroup.childNodes,b=0,c=d.length;c>b;b++){if(a=d[b],null!=a.offsetHeight)return a.offsetHeight;if(null!=a.height)return a.height.baseVal.value}},a.prototype.updateChildren=function(){var a,b,c,d,e,f;for(b=this.y+this.marginTop+this.contentHeight()+this.marginBottom,e=this.children,f=[],c=0,d=e.length;d>c;c++)a=e[c],a.y=a.isHidden?this.y:b,a.x=this.x+this.indent,f.push(b+=a.totalHeight());return f},a.prototype.moveChildren=function(a){var b,c,d,e,f;for(null==a&&(a=null),0===this.children.length&&null!=a&&a(),e=this.children,f=[],c=0,d=e.length;d>c;c++)b=e[c],f.push(b.updatePosition(a));return f},a.prototype.flagpoleLength=function(){var a,b,c,d,e;for(b=0,e=this.children,c=0,d=e.length;d>c;c++)a=e[c],a.isHidden||(b+=a===this.children[this.children.length-1]?a.marginTop+a.contentHeight()+a.marginBottom:a.totalHeight());return b},a.prototype.totalHeight=function(){var a,b,c,d,e;for(b=this.marginTop+this.contentHeight()+this.marginBottom+this.starLength,e=this.visibleChildren(),c=0,d=e.length;d>c;c++)a=e[c],b+=a.totalHeight();return b},a.prototype.getLinePoints=function(){var a;return a=this.y+this.marginTop+this.contentHeight()+this.marginBottom,"0 "+a+" "+this.indent+" "+a+" "+this.indent+" "+(a+this.flagpoleLength())},a.prototype.makeLine=function(){return this.linePoints=this.getLinePoints(),this.line=this.svgElement("polyline",{fill:"none",points:this.linePoints,"stroke-width":""+this.lineWidth+"px",stroke:this.treeColor}),this.el.appendChild(this.line)},a.prototype.getStarTop=function(){return this.y+this.flagpoleLength()+this.marginTop+this.contentHeight()+this.marginBottom},a.prototype.getStarLinePoints=function(){var a;return a=this.getStarTop(),""+this.indent+", "+a+", "+this.indent+", "+(a+this.starLength)},a.prototype.makeStar=function(){var a,b,c,d,e,f,g;return this.starTop=this.getStarTop(),g={x1:this.indent,y1:this.starTop,x2:this.indent,y2:this.starTop+this.starLength},g.fill="none",g.stroke=this.treeColor,g["stroke-width"]=""+this.lineWidth+"px",this.starLine=this.svgElement("line",g),this.el.appendChild(this.starLine),this.star=this.svgElement("g",{transform:"translate("+this.indent+", "+this.getStarTop()+")"}),f=Math.sqrt(this.starRadius*this.starRadius/2),d={x1:-f,y1:f,x2:f,y2:-f,fill:"none","stroke-width":""+this.lineWidth/2+"px",stroke:this.treeColor},this.star.appendChild(this.svgElement("line",d)),e={x1:-f,y1:-f,x2:f,y2:f,fill:"none","stroke-width":""+this.lineWidth/2+"px",stroke:this.treeColor},this.star.appendChild(this.svgElement("line",e)),b={x1:this.starRadius,y1:0,x2:-this.starRadius,y2:0,fill:"none","stroke-width":""+this.lineWidth/2+"px",stroke:this.treeColor},this.star.appendChild(this.svgElement("line",b)),c={x1:0,y1:this.starRadius,x2:0,y2:-this.starRadius,fill:"none","stroke-width":""+this.lineWidth/2+"px",stroke:this.treeColor},this.star.appendChild(this.svgElement("line",c)),a={cx:0,cy:0,r:this.starRadius,opacity:0},this.star.appendChild(this.svgElement("circle",a)),this.star.addEventListener("click",this.createChild),this.el.appendChild(this.star)},a.prototype.animateStar=function(b){var c;if(null==b&&(b=null),null==this.starLine){if(this.isHidden)return void(this.starTop=this.getStarTop());this.makeStar()}return c=this.getStarTop,a.animator.animation(this.starLine,"y1",""+this.starTop+"px",""+c+"px",this.frameLength,this.animateDuration,b)(),a.animator.animation(this.starLine,"y1",""+(this.starTop+this.starLength)+"px",""+(c+this.starLength)+"px",this.frameLength,this.animateDuration,null)(),a.animator.animation(this.star,"transform","translate("+this.indent+" "+(this.starTop+this.starLength)+")","translate("+this.indent+" "+(c+this.starLength)+")",this.frameLength,this.animateDuration,null)(),this.starTop=c},a.prototype.animateLine=function(b){var c;if(null==b&&(b=null),null==this.line){if(this.isHidden)return void(this.linePoints=this.getLinePoints());this.makeLine()}return c=this.getLinePoints(),a.animator.animation(this.line,"points",this.linePoints,c,this.frameLength,this.animateDuration,b)(),this.linePoints=c},a.prototype.animateContent=function(b){var c;return null==b&&(b=null),c=this.y+this.marginTop,a.animator.animation(this.content,"y",""+this.contentY+"px",""+c+"px",this.frameLength,this.animateDuration,b)(),this.contentY=c},a.prototype.makeCircle=function(){return this.circleX=this.indent,null==this.circleY&&(this.circleY=this.y+this.marginTop+this.contentHeight()+this.marginBottom),this.circle=this.svgElement("circle",{fill:this.treeColor,cx:this.indent,cy:this.circleY,r:this.circleRadius,"stroke-width":""+this.lineWidth+"px",stroke:this.treeColor}),this.circle.addEventListener("click",this.toggleChildrenVisible),this.el.appendChild(this.circle)},a.prototype.animateCircle=function(b){var c,d;if(null==b&&(b=null),null==this.circle){if(0===this.children.length||this.isHidden)return;this.makeCircle()}return d=this.y+this.marginTop+this.contentHeight()+this.marginBottom,a.animator.animation(this.circle,"cy",""+this.circleY+"px",""+d+"px",this.frameLength,this.animateDuration,b)(),this.circleY=d,c=0===this.visibleChildren().length?this.treeColor:this.emptyColor,this.circle.setAttribute("fill",c)},a.prototype.showChildren=function(){var a,b,c,d;for(d=this.children,b=0,c=d.length;c>b;b++)a=d[b],a.isHidden=!1;return this.updateChildren(),this.requestUpdate()},a.prototype.hideChildren=function(){var a,b,c,d,e,f,g,h;for(c=function(a){return function(){return 0===a.visibleChildren().length}}(this),d=function(a){return function(){return a.requestUpdate()}}(this),b=this.groupActionCallback(d,c),this.isRoot&&(b=this.groupActionCallback(this.updatePosition,c)),g=this.visibleChildren(),h=[],e=0,f=g.length;f>e;e++)a=g[e],h.push(a.hide(b));return h},a.prototype.hide=function(a){var b,c,d,e,f,g,h,i;for(0===this.visibleChildren().length&&(this.isHidden=!0,a(this)),d=function(b){return function(){return b.isHidden=!0,a(b)}}(this),e=function(a){return function(){return 0===a.visibleChildren().length}}(this),b=this.groupActionCallback(d,e),h=this.visibleChildren(),i=[],f=0,g=h.length;g>f;f++)c=h[f],i.push(c.hide(b));return i},a.prototype.groupActionCallback=function(a,b){return function(c){return b(c)&&null!=a?a():void 0}},a.prototype.visibleChildren=function(){return this.children.filter(function(a){return!a.isHidden})},a.prototype.animateVisible=function(b){var c;return null==b&&(b=null),c=this.isHidden?"0 1":"1 1",a.animator.animation(this.el,"transform","scale("+this.scale+")","scale("+c+")",this.frameLength,this.animateDuration,b)(),this.scale=c},a.prototype.makeContentGroup=function(){var a;return this.contentX=2*this.contentDX,a={transform:"translate("+this.contentX+", 0)"},this.contentGroup=this.svgElement("g",a),this.el.appendChild(this.contentGroup)},a.prototype.toggleChildrenVisible=function(){return this.visibleChildren().length!==this.children.length?this.showChildren():this.hideChildren()},a}(),f.DOGWOOD.SVGTreeNode=d,b=function(a){function b(){return this.makeContent=i(this.makeContent,this),this.makeText=i(this.makeText,this),this.createChild=i(this.createChild,this),b.__super__.constructor.apply(this,arguments)}return k(b,a),b.prototype.createChild=function(){var a;return a={},this.visibleChildren().length!==this.children.length&&(a.isHidden=!0),this.newChild(a),this.showChildren()},b.prototype.makeText=function(){return this.contentX=this.contentDX,this.contentY=this.y+this.marginTop,this.content=this.svgElement("text",{fill:"black",x:this.contentDX}),this.content.appendChild(document.createTextNode(this.name)),this.content.addEventListener("click",this.textClick),this.el.appendChild(this.content)},b.prototype.makeContent=function(){var a,b;return a=this.htmlElement("div"),b="background: red; height: 40px; width: 60px;",a.setAttribute("style",b),a.innerHTML=this.name,this.content=this.svgElement("foreignObject"),this.contentGroup.appendChild(this.content),this.content.appendChild(a),this.content.setAttribute("width",a.offsetWidth),this.content.setAttribute("height",a.offsetHeight),this.content.setAttribute("y",this.contentY),this.content.addEventListener("click",this.toggleChildrenVisible)},b}(d),f.BasicTree=b,c=function(a){function b(a){this.makeContent=i(this.makeContent,this),this.animateVisible=i(this.animateVisible,this);var c,d,e;this.link=a.link,this["class"]=a["class"],this.id=a.id,this.tag=a.tag,this.width=null!=(d=a.width)?d:"200px",this.height=null!=(e=a.height)?e:"20px",null==this.tag&&(this.tag=null!=this.link?"a":"p"),b.__super__.constructor.call(this,a),null==this.parent&&(c=this.totalHeight()+this.contentHeight()+this.outerFramePaddingBottom,this.el.setAttribute("height",""+c+"px"),this.div.setAttribute("height",""+c+"px"))}return k(b,a),b.prototype.animateVisible=function(a){var c;return null==a&&(a=null),this.isHidden?(c=function(b){return function(){return b.content.innerHTML="",null!=a?a():void 0}}(this),b.__super__.animateVisible.call(this,c)):(this.content.appendChild(this.contentDiv),b.__super__.animateVisible.call(this,a))},b.prototype.makeContent=function(){var a;return a={},null!=this.link&&(a={href:this.link}),null!=this["class"]&&(a["class"]=this["class"]),null!=this.id&&(a.id=id),this.a=this.htmlElement(this.tag,a),this.a.innerHTML=this.name,this.contentDiv=this.htmlElement("div",{"class":this["class"]}),this.contentDiv.appendChild(this.a),this.content=this.svgElement("foreignObject"),this.contentGroup.appendChild(this.content),this.isHidden||this.content.appendChild(this.contentDiv),this.contentDiv.style.height=this.height,this.contentDiv.style.width=this.width,this.content.setAttribute("width",this.width),this.content.setAttribute("height",this.height),this.content.setAttribute("y",this.contentY),null==this.link?this.contentDiv.addEventListener("click",this.toggleChildrenVisible):void 0},b}(d),f.DOGWOOD.MenuTree=c}).call(this);